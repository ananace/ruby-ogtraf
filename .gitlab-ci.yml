# Cache gems in between builds
cache:
  paths:
  - vendor/ruby

stages:
  - deps
  - lint
  - build

bundler:
  stage: deps
  script:
  - gem install bundler --no-ri --no-rdoc
  - bundle install -j4 --path vendor

rubocop:
  stage: lint
  script:
  - rubocop
  tags:
  - ruby

gem:
  stage: build
  script:
  - rake build
  tags:
  - ruby